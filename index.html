<!DOCTYPE html>
<html>
<head>
<script>
var T = "https://script.google.com/macros/s/AKfycbwBUOJz5AtZORmRnrbP9meNUZO1ux8K0s4B4-9-MvVpfTWlTjoLcUaDUEurdeIEi3Mchw/exec";
var S = "https://docs.google.com/presentation/d/10esAArSI2Mpz97EVjUtNqsgg7PVyHVG2lsmtVR9tZ4k/edit";

var p = new URLSearchParams(location.search);
var id = p.get("id") || "unknown";

var ua = navigator.userAgent;
var mobile = /Mobi|Android|iPhone|iPad|iPod/i.test(ua);
var tablet = /iPad|Android(?!.*Mobile)/i.test(ua);
var deviceType = tablet ? "tablet" : mobile ? "mobile" : "desktop";
var browser = /EdgiOS|Edg/i.test(ua) ? "Edge" : /OPR|Opera/i.test(ua) ? "Opera" : /CriOS|Chrome/i.test(ua) ? "Chrome" : /FxiOS|Firefox/i.test(ua) ? "Firefox" : /Safari/i.test(ua) ? "Safari" : "Other";
var os = /iPhone|iPad|iPod/i.test(ua) ? "iOS" : /Android/i.test(ua) ? "Android" : /Windows/i.test(ua) ? "Windows" : /Mac/i.test(ua) ? "macOS" : /Linux/i.test(ua) ? "Linux" : "Other";

var d = encodeURIComponent(JSON.stringify({
  type: deviceType,
  browser: browser,
  os: os,
  screen: screen.width + "x" + screen.height,
  dpr: window.devicePixelRatio || 1,
  lang: navigator.language,
  tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
  touch: navigator.maxTouchPoints > 0,
  ref: document.referrer
}));

var trackUrl = T + "?type=deck_click&id=" + encodeURIComponent(id) + "&d=" + d + "&t=" + Date.now();

// keepalive ensures the request survives page navigation (critical for mobile)
try { fetch(trackUrl, { mode: "no-cors", keepalive: true }); } catch(e) {}
new Image().src = trackUrl;

setTimeout(function() { window.location.replace(S); }, 80);
</script>
</head>
<body></body>
</html>
